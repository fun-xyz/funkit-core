const testFolder = './abis/';
const fs = require('fs');


const out = {}
const getFunctionSigToMethodMapping = ({ abi, contractName }) => {
    const iface = new ethers.utils.Interface(abi)
    const functions = Object.keys(iface.functions)

    const selectors = functions.map((fullMethod) => {
        const method = fullMethod.split("(")[0]
        const sig = iface.getSighash(method)
        out[sig] = {
            module: contractName,
            method,
            sig
        }
    })
}


const create = () => {
    fs.readdirSync(testFolder).forEach(file => {
        const data = require(testFolder + file)
        getFunctionSigToMethodMapping(data)

    });

    fs.writeFileSync("./out.json", JSON.stringify(out))
}


const sample1 = "0x55cd05cc0000000000000000000000006b175474e89094c44da98b954eedeac495271d0f000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000044a9059cbb000000000000000000000000f39fd6e51aad88f6f4ce6ab8827279cfffb922660000000000000000000000000000000000000000000000001bc16d674ec8000000000000000000000000000000000000000000000000000000000000"
const sample2 = "0x55cd05cc0000000000000000000000009e7f7d0e8b8f38e3cf2b3f7dd362ba2e9e82baa40000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000001a44242f027000000000000000000000000e592427a0aece92de3edee1f18e0157c0586156400000000000000000000000000000000000000000000000340aad21b3b70000000000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000104414bf389000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000006b175474e89094c44da98b954eedeac495271d0f0000000000000000000000000000000000000000000000000000000000000bb8000000000000000000000000ee235623967a7bf7beec69551d8c0c5c76c7466a00000000000000000000000000000000000000000000000000000186612bf0bc00000000000000000000000000000000000000000000000340aad21b3b7000000000000000000000000000000000000000000000000010d53e1a55a6cea52fac00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
const sample3 = "0x3a6e5a0a000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000000010000000000000000000000009e7f7d0e8b8f38e3cf2b3f7dd362ba2e9e82baa4000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000644ddf47d400000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"


console.log(methoddata[getMethodFromCallData(sample1)])
console.log(methoddata[getMethodFromCallData(sample2)])
console.log(methoddata[getMethodFromCallData(sample3)])